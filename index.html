<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Agente Dom√≥tico</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <main class="wrap">
        <header class="topbar">
            <div class="brand">
                <div class="logo">üè†</div>
                <div>
                    <h1>Agente Inteligente de Casa Dom√≥tica</h1>
                </div>
            </div>
            <div class="top-actions">
                <button id="btnAleatorio" title="Generar percepci√≥n aleatoria">Generar aleatoria</button>
                <button id="btnBorrarLog" title="Limpiar log">Borrar log</button>
            </div>
        </header>

        <section class="grid">
            <aside class="card controls">
                <h2>Percepciones</h2>
                <p class="muted">Selecciona percepciones desde el desplegable o escribe una personalizada.</p>
                <div class="multi-select" id="contenedorMultiSelect">
                    <button id="btnToggleDesplegable" class="select-btn" aria-haspopup="true" aria-expanded="false">
                        <span id="textoSeleccion">Seleccionar percepciones...</span>
                        <span class="chev">‚ñæ</span>
                    </button>
                    <div class="dropdown" id="desplegable">
                        <div class="dropdown-search">
                            <input id="buscarPercepcion" placeholder="Buscar..." />
                        </div>
                        <div id="listaCheckboxes" class="dropdown-list">
                            <!-- checkboxes creados por JS -->
                        </div>
                        <div class="dropdown-actions">
                            <button id="btnSeleccionarTodo">Seleccionar todo</button>
                            <button id="btnLimpiarSeleccion">Limpiar</button>
                            <button id="btnCerrarDesplegable">Cerrar</button>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <input id="personalizado" type="text"
                        placeholder="Ej: presencia_humana,es_de_noche,temperatura_baja"
                        aria-label="Percepci√≥n personalizada">
                    <button id="agregarPersonalizado">Agregar</button>
                </div>

                <div class="row space-between" style="margin-top:12px">
                    <button id="btnActuar" class="primary">Actuar</button>
                    <button id="btnLimpiar">Limpiar selecci√≥n</button>
                </div>
            </aside>

            <div class="col-derecha">
                <section class="card result">
                    <h2>Resultado</h2>
                    <div class="result-grid">
                        <div>
                            <label>Percepci√≥n actual</label>
                            <div id="percepcionActual" class="value">‚Äî</div>
                        </div>
                        <div>
                            <label>Acci√≥n devuelta</label>
                            <div id="accionResultado" class="value accent">‚Äî</div>
                        </div>
                        <div>
                            <label>Clave encontrada</label>
                            <div id="claveCoincidente" class="value">‚Äî</div>
                        </div>
                        <div>
                            <label>Notas</label>
                            <div id="notas" class="value muted">‚Äî</div>
                        </div>
                    </div>
                </section>
            </div>
        </section>
        <section class="card registro-fullwidth">
            <h3>Registro (interacciones recientes)</h3>
            <div id="contenedorLog">
                <pre id="areaLog" class="log" aria-live="polite">‚Äî</pre>
            </div>
        </section>
        <section class="card reglas-fullwidth">
            <h3>Reglas (mapeo percepci√≥n ‚Üí acci√≥n)</h3>
            <p class="muted small">A√±ade reglas nuevas; aparecer√°n aqu√≠ y el agente las usar√° de inmediato.</p>

            <div class="rule-editor">
                <input id="claveRegla" placeholder="Ej: presencia_humana,es_de_dia,temperatura_baja" />
                <input id="accionRegla" placeholder="Ej: subir_persianas+termostato_24" />
                <button id="btnAgregarRegla">A√±adir regla</button>
            </div>

            <div id="listaReglas" class="rules-list"></div>
        </section>
        <footer class="footer">
            <small>Valentina Restrepo Arboleda - Elizabeth Mu√±oz Martinez</small>
        </footer>
    </main>

    <script src="app.js"></script>
</body>

</html>